import{r as w,u as E,a as x,U as M,b as D,bh as B,j as e,bR as s,T as c,e as v,g as A,bH as f,Z as I,I as L,bA as U,bI as H,aH as N,k as F,aG as P}from"./strapi-_t5zS_PU.js";import{R as C}from"./RelativeTime-sCFb6Aq6.js";const _=a=>w.useEffect(a,$),$=[],J=({permissions:a,headers:n=[],isLoading:r=!1,tokens:l=[],onConfirmDelete:i,tokenType:o})=>{const[{query:d}]=E(),{formatMessage:b,locale:k}=x(),[,R]=d&&d.sort?d.sort.split(":"):[void 0,"ASC"],T=M(),{trackUsage:y}=D(),m=B(k),u=[...l].sort((t,h)=>R==="DESC"?m.compare(h.name,t.name):m.compare(t.name,h.name)),{canDelete:g,canUpdate:p,canRead:j}=a,S=t=>()=>{j&&(y("willEditTokenFromList",{tokenType:o}),T(t.toString()))};return e.jsx(s.Root,{headers:n,rows:u,isLoading:r,children:e.jsxs(s.Content,{children:[e.jsx(s.Head,{children:n.map(t=>e.jsx(s.HeaderCell,{...t},t.name))}),e.jsx(s.Empty,{}),e.jsx(s.Loading,{}),e.jsx(s.Body,{children:u.map(t=>e.jsxs(s.Row,{onClick:S(t.id),children:[e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(s.Cell,{children:e.jsx(c,{textColor:"neutral800",children:e.jsx(C,{timestamp:new Date(t.createdAt)})})}),e.jsx(s.Cell,{children:t.lastUsedAt&&e.jsx(c,{textColor:"neutral800",children:e.jsx(C,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:b({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),p||j||g?e.jsx(s.Cell,{children:e.jsxs(v,{justifyContent:"end",children:[p&&e.jsx(q,{tokenName:t.name,tokenId:t.id}),g&&e.jsx(O,{tokenName:t.name,onClickDelete:()=>i?.(t.id),tokenType:o})]})}):null]},t.id))})]})})},W={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},z=({tokenName:a,tokenId:n,buttonType:r="edit",children:l})=>{const{formatMessage:i}=x();return e.jsx(G,{tag:N,to:n.toString(),onClick:o=>o.stopPropagation(),title:i(W[r],{target:a}),variant:"ghost",size:"S",children:l})},G=F(P)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,O=({tokenName:a,onClickDelete:n,tokenType:r})=>{const{formatMessage:l}=x(),{trackUsage:i}=D(),o=()=>{i("willDeleteToken",{tokenType:r}),n()};return e.jsx(f.Root,{children:e.jsxs(I,{paddingLeft:1,onClick:d=>d.stopPropagation(),children:[e.jsx(f.Trigger,{children:e.jsx(L,{label:l({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${a}`}),name:"delete",variant:"ghost",children:e.jsx(U,{})})}),e.jsx(H,{onConfirm:o})]})})},q=({tokenName:a,tokenId:n})=>e.jsx(z,{tokenName:a,tokenId:n,children:e.jsx(A,{})});export{J as T,_ as u};
